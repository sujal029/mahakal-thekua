<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Mahakal Thekua — Store</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 + ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel (JSX in browser) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <meta name="theme-color" content="#0a0a0a"/>
  <style>
    body { background-color: #0a0a0a; }
    .perspective-\[1000px\] { perspective: 1000px; }
  </style>
</head>
<body class="bg-neutral-950 text-neutral-100">
  <div id="root"></div>

  <script type="text/babel">
    const { useMemo, useState } = React;

    // util: currency
    const INR = (n) =>
      new Intl.NumberFormat("en-IN", {
        style: "currency",
        currency: "INR",
        maximumFractionDigits: 0
      }).format(n);

    // contact / business
    const CONTACT = {
      phone: "+91 9993891875",
      phoneDigits: "919993891875",
      email: "baissujal292@gmail.com",
      addressLine: "Mahakal Foods, Ujjain (MP)"
    };

    // -----------------------
    // 3D hover / touch wrapper
    // -----------------------
    function Tilt3D({ children }) {
      const [tilt, setTilt] = React.useState({ x: 0, y: 0, active: false });

      function handleMove(e) {
        const rect = e.currentTarget.getBoundingClientRect();
        const pointX = e.clientX ?? (e.touches && e.touches[0]?.clientX);
        const pointY = e.clientY ?? (e.touches && e.touches[0]?.clientY);
        if (pointX == null || pointY == null) return;

        const px = (pointX - rect.left) / rect.width;
        const py = (pointY - rect.top) / rect.height;

        const rotateY = (px - 0.5) * 16;
        const rotateX = (0.5 - py) * 16;

        setTilt({ x: rotateX, y: rotateY, active: true });
      }

      function handleLeave() {
        setTilt({ x: 0, y: 0, active: false });
      }

      return (
        <div
          onMouseMove={handleMove}
          onMouseLeave={handleLeave}
          onTouchMove={handleMove}
          onTouchEnd={handleLeave}
          className="relative perspective-[1000px] cursor-pointer select-none"
        >
          <div
            className="transition-transform duration-200 ease-out will-change-transform drop-shadow-[0_30px_60px_rgba(0,0,0,0.8)]"
            style={{
              transform: `
                rotateX(${tilt.x}deg)
                rotateY(${tilt.y}deg)
                translateZ(${tilt.active ? "20px" : "0px"})
                scale(${tilt.active ? 1.05 : 1})
              `
            }}
          >
            {children}
          </div>

          <div
            className="pointer-events-none absolute inset-0 rounded-xl transition-opacity duration-200"
            style={{
              background:
                "radial-gradient(circle at 50% 20%, rgba(255,255,255,0.18), transparent 60%)",
              mixBlendMode: "screen",
              opacity: tilt.active ? 1 : 0
            }}
          />
        </div>
      );
    }

    // biscuit visuals
    function BiscuitSmall({ dark = false }) {
      return (
        <div
          className={
            "w-7 h-7 rounded-full border text-[7px] flex items-center justify-center font-bold " +
            (dark
              ? "bg-gradient-to-br from-amber-400 to-amber-600 border-amber-700 text-[#3a0000]"
              : "bg-gradient-to-br from-amber-300 to-amber-500 border-amber-700 text-[#4a0a0a]")
          }
          style={{ lineHeight: 1 }}
        >
          ✸
        </div>
      );
    }

    function BiscuitBig({ dark = false }) {
      return (
        <div
          className={
            "w-10 h-10 rounded-full border-[2px] text-[10px] flex items-center justify-center font-bold shadow-lg " +
            (dark
              ? "bg-gradient-to-br from-amber-400 to-amber-600 border-amber-800 text-[#3a0000]"
              : "bg-gradient-to-br from-amber-300 to-amber-500 border-amber-800 text-[#4a0a0a]")
          }
          style={{ lineHeight: 1 }}
        >
          ✸
        </div>
      );
    }

    // product mock images
    function ProductImage250({ className = "" }) {
      return (
        <div className={"relative w-full h-full flex items-center justify-center " + className}>
          <div className="relative w-full h-full max-w-[140px] rounded-xl border border-amber-600/40 bg-gradient-to-b from-amber-200 via-amber-300 to-amber-600 shadow-[0_20px_60px_rgba(0,0,0,0.8)] flex flex-col items-center p-3 text-neutral-900 overflow-hidden">
            <div className="absolute top-0 left-0 right-0 h-3 rounded-t-xl bg-gradient-to-b from-amber-500 to-amber-700 border-b border-amber-800"></div>

            <div className="mt-4 text-center leading-tight">
              <div className="text-[14px] font-extrabold text-[#4a0a0a] tracking-tight">महाकाल</div>
              <div className="text-[10px] font-bold text-[#4a0a0a] uppercase tracking-wide">THEKUA</div>
              <div className="text-[9px] text-[#4a0a0a] font-semibold mt-1">CLASSIC • GUR • SAUNF</div>
              <div className="text-[8px] text-[#4a0a0a] mt-1">NET WT. 250 g</div>
            </div>

            {/* thekua biscuit stack */}
            <div className="mt-2 flex flex-col items-center">
              <div className="flex gap-1">
                <BiscuitSmall />
                <BiscuitSmall />
                <BiscuitSmall />
              </div>
              <div className="relative mt-2 flex items-end justify-center">
                <div className="translate-y-2">
                  <BiscuitBig />
                </div>
                <div className="-mx-1 flex gap-1">
                  <BiscuitBig />
                  <BiscuitBig />
                </div>
              </div>
            </div>

            <div className="mt-3 w-full text-center text-[7px] text-[#4a0a0a] font-semibold tracking-wide">
              UJJAIN • MAHAKAL
            </div>

            <div className="absolute bottom-6 left-1/2 -translate-x-1/2 w-24 h-12 rounded-full bg-amber-400/20 blur-xl pointer-events-none" />
          </div>
        </div>
      );
    }

    function ProductImage500({ className = "" }) {
      return (
        <div className={"relative w-full h-full flex items-center justify-center " + className}>
          <div className="relative w-full h-full max-w-[140px] rounded-xl border border-yellow-500/40 bg-gradient-to-br from-[#3a0000] via-[#4a0000] to-[#300000] shadow-[0_20px_60px_rgba(0,0,0,0.8)] flex flex-col items-center p-3 text-amber-200 overflow-hidden">
            <div className="absolute inset-0 pointer-events-none">
              <div className="absolute top-2 left-2 text-[8px] text-amber-400 font-semibold">ॐ</div>
              <div className="absolute bottom-2 right-2 text-[8px] text-amber-400 font-semibold">त्रिशूल</div>
            </div>

            <div className="mt-2 text-center leading-tight">
              <div className="text-[14px] font-extrabold text-amber-300 tracking-tight">महाकाल</div>
              <div className="text-[10px] font-bold text-amber-300 uppercase tracking-wide">THEKUA</div>
              <div className="text-[9px] text-amber-400 font-semibold mt-1">CLASSIC • PURE GHEE</div>
              <div className="text-[8px] text-amber-500 mt-1">NET WT. 500 g</div>
            </div>

            <div className="mt-2 flex flex-col items-center">
              <div className="flex gap-1">
                <BiscuitSmall dark />
                <BiscuitSmall dark />
                <BiscuitSmall dark />
              </div>
              <div className="relative mt-2 flex items-end justify-center">
                <div className="translate-y-2">
                  <BiscuitBig dark />
                </div>
                <div className="-mx-1 flex gap-1">
                  <BiscuitBig dark />
                  <BiscuitBig dark />
                </div>
              </div>
            </div>

            <div className="mt-3 w-full text-center text-[7px] text-amber-500 font-semibold tracking-wide">
              UJJAIN SPECIAL
            </div>

            <div className="absolute bottom-6 left-1/2 -translate-x-1/2 w-24 h-12 rounded-full bg-amber-400/20 blur-xl pointer-events-none" />
          </div>
        </div>
      );
    }

    // products data
    const PRODUCTS = [
      { id: "thekua-250", name: "Mahakal Thekua — 250 g", price: 199, weight: "250 g", tag: "Classic • Gur–Saunf", variant: "A" },
      { id: "thekua-500", name: "Mahakal Thekua — 500 g", price: 349, weight: "500 g", tag: "Classic • Gur–Saunf", variant: "D" }
    ];

    // icons / layout bits
    function TrishulLogo() {
      return (
        <svg
          viewBox="0 0 64 64"
          className="h-8 w-8 text-amber-400"
          fill="none"
          stroke="currentColor"
          strokeWidth="3"
          strokeLinecap="round"
        >
          <path d="M32 6 C28 14, 24 18, 24 22 C24 27, 28 30, 32 34 C36 30, 40 27, 40 22 C40 18, 36 14, 32 6" />
          <path d="M32 34 L32 58" />
          <path d="M22 18 C18 16, 14 16, 10 18" />
          <path d="M42 18 C46 16, 50 16, 54 18" />
        </svg>
      );
    }

    function Header({ onOpenCart }) {
      return (
        <header className="sticky top-0 z-30 w-full border-b border-neutral-800 bg-neutral-950/80 backdrop-blur">
          <div className="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
            <div className="flex items-center gap-3">
              <TrishulLogo />
              <div>
                <div className="text-xl font-extrabold tracking-wider text-amber-400 uppercase">
                  Mahakal Thekua
                </div>
                <div className="text-[11px] text-neutral-400">
                  Prasad-inspired • Ujjain • Since 2024
                </div>
              </div>
            </div>
            <div className="flex items-center gap-3">
              <a
                href={"tel:" + CONTACT.phoneDigits}
                className="hidden text-sm text-neutral-300 hover:text-white sm:inline"
              >
                {CONTACT.phone}
              </a>
              <button
                onClick={onOpenCart}
                className="rounded-xl bg-amber-500 px-4 py-2 text-sm font-semibold text-black shadow hover:bg-amber-400"
              >
                View Cart
              </button>
            </div>
          </div>
        </header>
      );
    }

    function Hero() {
      return (
        <section className="bg-gradient-to-b from-neutral-950 to-neutral-900">
          <div className="mx-auto grid max-w-6xl grid-cols-1 items-start gap-8 px-4 py-10 md:grid-cols-2">
            {/* LEFT TEXT */}
            <div>
              <h1 className="mb-3 text-4xl font-black tracking-tight text-white md:text-5xl leading-tight">
                महाकाल ठेकुआ —{" "}
                <span className="text-amber-400">Gur • Saunf • Ghee</span>
              </h1>

              <p className="mb-5 text-neutral-300 max-w-xl">
                Fresh, crispy and travel-friendly. Best before 3 weeks.
                Handcrafted in small batches in Ujjain.
              </p>

              <ul className="mb-8 grid grid-cols-2 gap-2 text-sm text-neutral-300 md:grid-cols-3 max-w-xl">
                <li className="rounded-xl border border-neutral-800 bg-neutral-900 px-3 py-2">
                  100% Veg
                </li>
                <li className="rounded-xl border border-neutral-800 bg-neutral-900 px-3 py-2">
                  Prasad-inspired
                </li>
                <li className="rounded-xl border border-neutral-800 bg-neutral-900 px-3 py-2">
                  Small-batch fried
                </li>
                <li className="rounded-xl border border-neutral-800 bg-neutral-900 px-3 py-2">
                  Classic taste
                </li>
                <li className="rounded-xl border border-neutral-800 bg-neutral-900 px-3 py-2">
                  Ujjain Special
                </li>
                <li className="rounded-xl border border-neutral-800 bg-neutral-900 px-3 py-2">
                  Fast checkout
                </li>
              </ul>
            </div>

            {/* RIGHT MOCK VISUALS */}
            <div className="relative mx-auto grid w-full max-w-sm grid-cols-2 gap-4">
              <div className="rounded-2xl border border-neutral-800 bg-gradient-to-b from-neutral-900 to-neutral-800/20 p-3 shadow-[0_60px_120px_rgba(0,0,0,0.9)]">
                <div className="mb-2 text-[10px] font-semibold text-amber-400">
                  250 g (Variant A)
                </div>
                <div className="overflow-visible rounded-xl border border-neutral-800 bg-neutral-950/20 flex items-center justify-center h-32 relative">
                  <Tilt3D>
                    <ProductImage250 className="scale-[1]" />
                  </Tilt3D>
                </div>
              </div>

              <div className="rounded-2xl border border-neutral-800 bg-gradient-to-b from-neutral-900 to-neutral-800/20 p-3 shadow-[0_60px_120px_rgba(0,0,0,0.9)]">
                <div className="mb-2 text-[10px] font-semibold text-amber-400">
                  500 g (Variant D)
                </div>
                <div className="overflow-visible rounded-xl border border-neutral-800 bg-neutral-950/20 flex items-center justify-center h-32 relative">
                  <Tilt3D>
                    <ProductImage500 className="scale-[1]" />
                  </Tilt3D>
                </div>
              </div>
            </div>
          </div>
        </section>
      );
    }

    function Products({ onAdd }) {
      return (
        <section className="mx-auto max-w-6xl px-4 py-10">
          <h2 className="mb-6 text-2xl font-extrabold text-white">
            Products
          </h2>

          <div className="grid grid-cols-1 gap-6 lg:grid-cols-2">
            {PRODUCTS.map((p) => (
              <div
                key={p.id}
                className="rounded-2xl border border-neutral-800 bg-gradient-to-b from-neutral-900 to-neutral-800/20 p-4 shadow-[0_80px_160px_rgba(0,0,0,1)] flex flex-col sm:flex-row gap-4"
              >
                {/* product image block */}
                <div className="shrink-0 w-full sm:w-32 h-32 rounded-xl border border-neutral-800 bg-neutral-950/30 flex items-center justify-center overflow-visible relative">
                  <Tilt3D>
                    {p.id === "thekua-250" ? (
                      <ProductImage250 className="scale-[1.05]" />
                    ) : (
                      <ProductImage500 className="scale-[1.05]" />
                    )}
                  </Tilt3D>
                </div>

                {/* product text */}
                <div className="flex-1 flex flex-col">
                  <div className="text-lg font-bold text-white">
                    {p.name}
                  </div>
                  <div className="text-xs text-neutral-400">
                    {p.tag}
                  </div>

                  <div className="mt-2 text-xl font-extrabold text-amber-400">
                    {INR(p.price)}
                  </div>

                  <div className="mt-3 flex flex-wrap gap-2">
                    <button
                      onClick={() => onAdd(p)}
                      className="rounded-xl bg-amber-500 px-3 py-2 text-sm font-semibold text-black hover:bg-amber-400"
                    >
                      Add to Cart
                    </button>

                    <a
                      href={`https://wa.me/${CONTACT.phoneDigits}?text=${encodeURIComponent(
                        "Hi, I want to order: " +
                          p.name +
                          " (" +
                          p.weight +
                          ") – " +
                          INR(p.price) +
                          "."
                      )}`}
                      target="_blank"
                      className="rounded-xl border border-amber-500 px-3 py-2 text-sm font-semibold text-amber-400 hover:bg-amber-500/10"
                    >
                      Order via WhatsApp
                    </a>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </section>
      );
    }

    // Story Section (benefits + history)
    function StorySection() {
      return (
        <section className="mx-auto max-w-6xl px-4 pb-16">
          <div className="grid gap-6 lg:grid-cols-2">
            {/* LEFT: about / history */}
            <div className="rounded-2xl border border-neutral-800 bg-neutral-900/60 p-6 shadow-[0_60px_120px_rgba(0,0,0,1)]">
              <h2 className="text-2xl font-extrabold text-white mb-3">
                Thekua ka Asli Story
              </h2>
              <p className="text-neutral-300 text-sm leading-relaxed">
                Thekua ek traditional Indian sweet snack hai jo Bihar,
                Jharkhand, Eastern UP side se aaya aur teej-tihar jaise
                Chhath Puja me prasad ke roop me diya jaata tha. Aata
                (gehun ka flour), gud (jaggery), saunf, aur ghee se
                banta hai, phir dheere-dheere tel ya ghee me deep fry
                hota hai jab tak golden crisp na ho jaye.
              </p>
              <p className="text-neutral-400 text-xs mt-4 leading-relaxed">
                Hum Ujjain style me isko “Mahakal Thekua” ke naam se laa
                rahe hain — taste inspired by prasad vibe, travel-friendly
                packing, aur bharose ka feel ki ye cheez mandir le jaa
                sakte ho, ghar walo ko share kar sakte ho, ya train/bus me
                munch kar sakte ho bina chipakne, bina fridge ke.
              </p>
              <div className="mt-4 text-[11px] text-amber-400 font-semibold">
                • No egg, no preservative • 100% veg • Satvik style
              </div>
            </div>

            {/* RIGHT: benefits */}
            <div className="rounded-2xl border border-neutral-800 bg-neutral-900/60 p-6 shadow-[0_60px_120px_rgba(0,0,0,1)]">
              <h2 className="text-2xl font-extrabold text-white mb-3">
                क्यूँ खाएँ Mahakal Thekua?
              </h2>

              <ul className="space-y-4 text-sm">
                <li className="rounded-xl border border-neutral-800 bg-neutral-950/40 p-4">
                  <div className="text-amber-400 font-semibold text-sm">
                    Natural sweetness
                  </div>
                  <div className="text-neutral-300 text-xs">
                    Gud / jaggery se meetha aata hai — refined sugar
                    ke bina bhi rich taste milta hai.
                  </div>
                </li>

                <li className="rounded-xl border border-neutral-800 bg-neutral-950/40 p-4">
                  <div className="text-amber-400 font-semibold text-sm">
                    Saunf + ghee comfort bite
                  </div>
                  <div className="text-neutral-300 text-xs">
                    Saunf digestion ko halka rakhti hai, ghee halka
                    melt-in-mouth feel deta hai. Chai ke saath killer
                    combo.
                  </div>
                </li>

                <li className="rounded-xl border border-neutral-800 bg-neutral-950/40 p-4">
                  <div className="text-amber-400 font-semibold text-sm">
                    Travel snack
                  </div>
                  <div className="text-neutral-300 text-xs">
                    3 weeks tak safe rehta hai bina fridge. Ghar se
                    bahar ho, yatra pe ho, mandir darshan pe ho —
                    pocket me dal ke le jao.
                  </div>
                </li>
              </ul>

              <div className="mt-5 text-[11px] text-neutral-500 leading-relaxed">
                Note: Ye ek fried sweet snack hai — allergy ya health
                restriction ho to apne hisaab se consume karein.
              </div>
            </div>
          </div>

          {/* How ordering works */}
          <div className="rounded-2xl border border-neutral-800 bg-neutral-900 p-6 text-sm text-neutral-300 shadow-[0_30px_80px_rgba(0,0,0,0.8)] mt-10">
            <div className="mb-2 font-semibold text-white text-lg">
              How ordering works
            </div>
            <ol className="list-decimal space-y-1 pl-5 text-[13px] leading-relaxed">
              <li>Add products to your cart.</li>
              <li>
                Click checkout, fill delivery details, then tap
                "Submit Details &amp; Send on WhatsApp".
              </li>
              <li>
                We receive your full address + order on WhatsApp and
                call you. Cash / UPI on delivery.
              </li>
            </ol>
          </div>
        </section>
      );
    }

    function CartDrawer({
      open,
      items,
      onClose,
      onInc,
      onDec,
      onRemove,
      onCheckout
    }) {
      const totals = useMemo(() => {
        const subtotal = items.reduce(
          (a, it) => a + it.price * it.qty,
          0
        );
        const delivery = items.length ? 49 : 0;
        return { subtotal, delivery, total: subtotal + delivery };
      }, [items]);

      return (
        <div
          className={
            "fixed inset-0 z-50 " +
            (open ? "pointer-events-auto" : "pointer-events-none")
          }
          aria-hidden={!open}
        >
          <div
            className={
              "absolute inset-0 bg-black/60 transition-opacity " +
              (open ? "opacity-100" : "opacity-0")
            }
            onClick={onClose}
          />

          <aside
            className={
              "absolute right-0 top-0 h-full w-full max-w-md transform bg-neutral-950 shadow-xl transition-transform " +
              (open ? "translate-x-0" : "translate-x-full")
            }
          >
            <div className="flex items-center justify-between border-b border-neutral-800 p-4">
              <h3 className="text-lg font-bold text-white">
                Your Cart
              </h3>
              <button
                onClick={onClose}
                className="rounded-lg border border-neutral-700 px-3 py-1 text-sm text-neutral-300 hover:bg-neutral-800"
              >
                Close
              </button>
            </div>

            <div className="h-[calc(100vh-240px)] space-y-3 overflow-y-auto p-4">
              {items.length === 0 && (
                <div className="py-12 text-center text-neutral-400">
                  Cart is empty.
                </div>
              )}

              {items.map((it) => (
                <div
                  key={it.id}
                  className="flex items-center gap-3 rounded-xl border border-neutral-800 bg-neutral-900 p-3 shadow-[0_30px_80px_rgba(0,0,0,0.8)]"
                >
                  <div className="h-16 w-16 shrink-0 overflow-visible rounded-lg border border-neutral-800 bg-neutral-950/30 p-1 flex items-center justify-center relative">
                    <Tilt3D>
                      {it.id === "thekua-250" ? (
                        <ProductImage250 className="scale-[0.9]" />
                      ) : (
                        <ProductImage500 className="scale-[0.9]" />
                      )}
                    </Tilt3D>
                  </div>

                  <div className="flex-1">
                    <div className="text-sm font-semibold text-white">
                      {it.name}
                    </div>
                    <div className="text-xs text-neutral-400">
                      {it.weight}
                    </div>

                    <div className="mt-1 text-amber-400">
                      {INR(it.price)} x {it.qty}
                    </div>

                    <div className="mt-2 flex items-center gap-2">
                      <button
                        onClick={() => onDec(it.id)}
                        className="rounded-md border border-neutral-700 px-2 text-neutral-300 hover:bg-neutral-800"
                      >
                        -
                      </button>
                      <span className="min-w-[24px] text-center text-white">
                        {it.qty}
                      </span>
                      <button
                        onClick={() => onInc(it.id)}
                        className="rounded-md border border-neutral-700 px-2 text-neutral-300 hover:bg-neutral-800"
                      >
                        +
                      </button>
                      <button
                        onClick={() => onRemove(it.id)}
                        className="ml-3 text-xs text-red-400 hover:underline"
                      >
                        Remove
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>

            <div className="border-t border-neutral-800 p-4">
              <div className="mb-1 flex justify-between text-sm text-neutral-300">
                <span>Subtotal</span>
                <span>{INR(totals.subtotal)}</span>
              </div>
              <div className="mb-2 flex justify-between text-sm text-neutral-300">
                <span>Delivery</span>
                <span>{INR(totals.delivery)}</span>
              </div>
              <div className="mb-4 flex justify-between text-lg font-extrabold text-white">
                <span>Total</span>
                <span>{INR(totals.total)}</span>
              </div>

              <button
                onClick={onCheckout}
                disabled={!items.length}
                className="w-full rounded-xl bg-amber-500 px-4 py-3 font-bold text-black enabled:hover:bg-amber-400 disabled:opacity-40"
              >
                Checkout
              </button>

              <p className="mt-3 text-center text-xs text-neutral-400">
                Need help?{" "}
                <a
                  className="underline"
                  href={"mailto:" + CONTACT.email}
                >
                  {CONTACT.email}
                </a>{" "}
                •{" "}
                <a
                  className="underline"
                  href={"tel:" + CONTACT.phoneDigits}
                >
                  {CONTACT.phone}
                </a>
              </p>
            </div>
          </aside>
        </div>
      );
    }

    // form inputs
    function Input({ label, ...rest }) {
      return (
        <label className="grid gap-1 text-sm">
          <span className="text-neutral-300">{label}</span>
          <input
            {...rest}
            className="w-full rounded-lg border border-neutral-700 bg-neutral-950 px-3 py-2 text-neutral-100 outline-none ring-amber-500 focus:border-amber-500"
          />
        </label>
      );
    }

    function Textarea({ label, ...rest }) {
      return (
        <label className="grid gap-1 text-sm">
          <span className="text-neutral-300">{label}</span>
          <textarea
            {...rest}
            rows={3}
            className="w-full rounded-lg border border-neutral-700 bg-neutral-950 px-3 py-2 text-neutral-100 outline-none ring-amber-500 focus:border-amber-500"
          />
        </label>
      );
    }

    // CHECKOUT MODAL
    function Checkout({ open, items, onClose }) {
      const [form, setForm] = useState({
        name: "",
        phone: "",
        email: "",
        address1: "",
        address2: "",
        city: "",
        state: "",
        pincode: "",
        landmark: "",
        notes: ""
      });

      const [detailsReady, setDetailsReady] = useState(false);
      const [orderPlaced, setOrderPlaced] = useState(false);

      const totals = useMemo(() => {
        const subtotal = items.reduce(
          (a, it) => a + it.price * it.qty,
          0
        );
        const delivery = items.length ? 49 : 0;
        const total = subtotal + delivery;
        return { subtotal, delivery, total };
      }, [items]);

      const valid = useMemo(() => {
        const phoneOk = /^[0-9]{10}$/.test(form.phone.trim());
        const pinOk = /^[0-9]{6}$/.test(form.pincode.trim());
        return (
          form.name &&
          phoneOk &&
          form.address1 &&
          form.city &&
          form.state &&
          pinOk
        );
      }, [form]);

      const INRfmt = (n) =>
        new Intl.NumberFormat("en-IN", {
          style: "currency",
          currency: "INR",
          maximumFractionDigits: 0
        }).format(n);

      const summaryText = useMemo(() => {
        const lines = [
          "New Order — Mahakal Thekua",
          "",
          "Items:",
          ...items.map(
            (it) =>
              `• ${it.name} (${it.weight}) x ${it.qty} — ${INRfmt(
                it.price * it.qty
              )}`
          ),
          `Subtotal: ${INRfmt(totals.subtotal)}`,
          `Delivery: ${INRfmt(totals.delivery)}`,
          `TOTAL: ${INRfmt(totals.total)}`,
          "",
          `Customer: ${form.name}`,
          `Phone: ${form.phone}`,
          `Email: ${form.email || "-"}`,
          `Address: ${form.address1}${
            form.address2 ? ", " + form.address2 : ""
          }, ${form.city}, ${form.state} - ${form.pincode}`,
          form.landmark ? `Landmark: ${form.landmark}` : "",
          form.notes ? `Notes: ${form.notes}` : ""
        ].filter(Boolean);
        return lines.join("\n");
      }, [items, totals, form]);

      const mailtoHref = useMemo(() => {
        const subject = encodeURIComponent(
          "New Order — Mahakal Thekua"
        );
        const body = encodeURIComponent(summaryText);
        return `mailto:${CONTACT.email}?subject=${subject}&body=${body}`;
      }, [summaryText]);

      const whatsappHref = useMemo(() => {
        return (
          "https://wa.me/" +
          CONTACT.phoneDigits +
          "?text=" +
          encodeURIComponent(summaryText)
        );
      }, [summaryText]);

      const onChange = (e) =>
        setForm((f) => ({ ...f, [e.target.name]: e.target.value }));

      // old button: send details + open WhatsApp
      const handleSubmitDetails = () => {
        if (!valid || !items.length) return;
        setDetailsReady(true);

        window.open(
          "https://wa.me/" +
            CONTACT.phoneDigits +
            "?text=" +
            encodeURIComponent(summaryText),
          "_blank"
        );
      };

      // NEW BUTTON: confirm order -> show success message like Amazon
      const handlePlaceOrderLocal = () => {
        if (!valid || !items.length) return;
        setOrderPlaced(true);
      };

      return (
        <div
          className={
            "fixed inset-0 z-50 " +
            (open ? "" : "pointer-events-none")
          }
        >
          <div
            className={
              "absolute inset-0 bg-black/60 transition-opacity " +
              (open ? "opacity-100" : "opacity-0")
            }
            onClick={onClose}
          />
          <div
            className={
              "absolute inset-x-0 bottom-0 top-10 mx-auto max-w-3xl transform rounded-t-2xl border border-neutral-800 bg-neutral-950 shadow-2xl transition-all " +
              (open ? "translate-y-0" : "translate-y-full")
            }
          >
            <div className="flex items-center justify-between border-b border-neutral-800 p-4">
              <h3 className="text-lg font-bold text-white">
                Checkout
              </h3>
              <button
                onClick={onClose}
                className="rounded-lg border border-neutral-700 px-3 py-1 text-sm text-neutral-300 hover:bg-neutral-800"
              >
                Close
              </button>
            </div>

            <div className="grid grid-cols-1 gap-6 overflow-y-auto p-4 md:grid-cols-2">
              {/* LEFT: DELIVERY FORM */}
              <div>
                <h4 className="mb-2 text-sm font-semibold text-white">
                  Delivery Details
                </h4>

                <div className="grid grid-cols-1 gap-3">
                  <Input
                    label="Full Name"
                    name="name"
                    value={form.name}
                    onChange={onChange}
                    required
                  />
                  <Input
                    label="Phone (10 digits)"
                    name="phone"
                    value={form.phone}
                    onChange={onChange}
                    required
                  />
                  <Input
                    label="Email (optional)"
                    name="email"
                    value={form.email}
                    onChange={onChange}
                  />
                  <Input
                    label="Address Line 1"
                    name="address1"
                    value={form.address1}
                    onChange={onChange}
                    required
                  />
                  <Input
                    label="Address Line 2"
                    name="address2"
                    value={form.address2}
                    onChange={onChange}
                  />

                  <div className="grid grid-cols-2 gap-3">
                    <Input
                      label="City"
                      name="city"
                      value={form.city}
                      onChange={onChange}
                      required
                    />
                    <Input
                      label="State"
                      name="state"
                      value={form.state}
                      onChange={onChange}
                      required
                    />
                  </div>

                  <div className="grid grid-cols-2 gap-3">
                    <Input
                      label="Pincode"
                      name="pincode"
                      value={form.pincode}
                      onChange={onChange}
                      required
                    />
                    <Input
                      label="Landmark (optional)"
                      name="landmark"
                      value={form.landmark}
                      onChange={onChange}
                    />
                  </div>

                  <Textarea
                    label="Notes (optional)"
                    name="notes"
                    value={form.notes}
                    onChange={onChange}
                  />
                </div>

                {/* SUBMIT DETAILS BUTTON */}
                <button
                  onClick={handleSubmitDetails}
                  disabled={!valid || !items.length}
                  className={
                    "mt-4 w-full rounded-xl px-4 py-3 text-sm font-bold shadow " +
                    (valid && items.length
                      ? "bg-amber-500 text-black hover:bg-amber-400"
                      : "cursor-not-allowed bg-neutral-800 text-neutral-500")
                  }
                >
                  Submit Details &amp; Send on WhatsApp
                </button>

                {/* NEW: PLACE ORDER BUTTON */}
                <button
                  onClick={handlePlaceOrderLocal}
                  disabled={!valid || !items.length}
                  className={
                    "mt-3 w-full rounded-xl px-4 py-3 text-sm font-bold shadow " +
                    (valid && items.length
                      ? "bg-green-600 text-black hover:bg-green-500"
                      : "cursor-not-allowed bg-neutral-800 text-neutral-500")
                  }
                >
                  Place Order
                </button>

                {/* status messages below buttons */}
                {orderPlaced ? (
                  <div className="mt-3 rounded-xl border border-green-600 bg-green-900/30 p-3 text-xs font-semibold text-green-400">
                    ✅ Order Placed!  
                    <br/>
                    Mahakal Foods team will confirm by call / WhatsApp.
                    <br/>
                    Cash / UPI on delivery. धन्यवाद 🙏
                  </div>
                ) : detailsReady ? (
                  <div className="mt-3 rounded-xl border border-amber-500 bg-amber-900/20 p-3 text-xs font-semibold text-amber-300">
                    Details sent on WhatsApp ✅
                    <br/>
                    Wait for confirmation call.
                  </div>
                ) : (
                  <div className="mt-3 text-[11px] text-neutral-500">
                    Fill all required fields, then tap any button.
                  </div>
                )}
              </div>

              {/* RIGHT: ORDER SUMMARY */}
              <div>
                <h4 className="mb-2 text-sm font-semibold text-white">
                  Order Summary
                </h4>

                <div className="space-y-3">
                  <div className="rounded-xl border border-neutral-800 bg-neutral-900 p-3 text-sm text-neutral-200">
                    {items.length === 0 ? (
                      <div className="text-sm text-neutral-400">
                        No items yet. Add products to cart.
                      </div>
                    ) : (
                      <>
                        {items.map((it) => (
                          <div
                            key={it.id}
                            className="flex justify-between"
                          >
                            <span>
                              {it.name} x {it.qty}
                            </span>
                            <span>
                              {INR(it.price * it.qty)}
                            </span>
                          </div>
                        ))}

                        <div className="mt-2 flex justify-between text-neutral-300">
                          <span>Subtotal</span>
                          <span>{INR(totals.subtotal)}</span>
                        </div>

                        <div className="flex justify-between text-neutral-300">
                          <span>Delivery</span>
                          <span>{INR(totals.delivery)}</span>
                        </div>

                        <div className="flex justify-between text-base font-extrabold text-white">
                          <span>Total</span>
                          <span>{INR(totals.total)}</span>
                        </div>
                      </>
                    )}
                  </div>

                  <div className="rounded-xl border border-neutral-800 bg-neutral-900 p-3 text-xs text-neutral-400">
                    Orders are confirmed by phone/WhatsApp.
                    Payment: Cash/UPI on delivery (COD).
                    Best before 3 weeks.
                  </div>

                  {/* Manual fallback buttons (still here) */}
                  <div className="grid grid-cols-1 gap-2">
                    <a
                      target="_blank"
                      href={whatsappHref}
                      className={
                        "w-full rounded-xl bg-green-500 px-4 py-3 text-center font-bold text-black hover:bg-green-400 " +
                        ((!valid || !items.length)
                          ? "pointer-events-none opacity-40"
                          : "")
                      }
                    >
                      Place Order on WhatsApp
                    </a>

                    <a
                      href={mailtoHref}
                      className={
                        "w-full rounded-xl bg-amber-500 px-4 py-3 text-center font-bold text-black hover:bg-amber-400 " +
                        ((!valid || !items.length)
                          ? "pointer-events-none opacity-40"
                          : "")
                      }
                    >
                      Send Order by Email
                    </a>
                  </div>

                  <pre className="mt-3 max-h-48 overflow-auto whitespace-pre-wrap rounded-xl border border-neutral-800 bg-neutral-950 p-3 text-xs text-neutral-300">
{summaryText}
                  </pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    function Footer() {
      return (
        <footer className="border-t border-neutral-800 bg-neutral-950">
          <div className="mx-auto grid max-w-6xl grid-cols-1 gap-3 px-4 py-6 sm:grid-cols-3">
            <div>
              <div className="text-sm text-neutral-400">Contact</div>
              <div className="text-sm text-neutral-200">
                <a href={"tel:" + CONTACT.phoneDigits}>
                  {CONTACT.phone}
                </a>
              </div>
              <div className="text-sm text-neutral-200">
                <a href={"mailto:" + CONTACT.email}>
                  {CONTACT.email}
                </a>
              </div>
            </div>

            <div>
              <div className="text-sm text-neutral-400">Kitchen</div>
              <div className="text-sm text-neutral-200">
                {CONTACT.addressLine}
              </div>
              <div className="text-xs text-neutral-500">
                FSSAI Lic. No.: XXXXXXXX
              </div>
            </div>

            <div className="flex items-start justify-start sm:justify-end">
              <TrishulLogo />
            </div>
          </div>
        </footer>
      );
    }

    // APP ROOT
    function App() {
      const [cartOpen, setCartOpen] = useState(false);
      const [checkoutOpen, setCheckoutOpen] = useState(false);
      const [items, setItems] = useState([]);

      const addToCart = (p) => {
        setItems((prev) => {
          const found = prev.find((x) => x.id === p.id);
          if (found)
            return prev.map((x) =>
              x.id === p.id ? { ...x, qty: x.qty + 1 } : x
            );
          return [...prev, { ...p, qty: 1 }];
        });
        setCartOpen(true);
      };

      const inc = (id) =>
        setItems((prev) =>
          prev.map((x) =>
            x.id === id ? { ...x, qty: x.qty + 1 } : x
          )
        );

      const dec = (id) =>
        setItems((prev) =>
          prev.map((x) =>
            x.id === id
              ? { ...x, qty: Math.max(1, x.qty - 1) }
              : x
          )
        );

      const remove = (id) =>
        setItems((prev) => prev.filter((x) => x.id !== id));

      return (
        <div className="min-h-screen bg-neutral-950 text-neutral-100">
          <Header onOpenCart={() => setCartOpen(true)} />
          <Hero />
          <Products onAdd={addToCart} />

          {/* story + benefits + how to order */}
          <StorySection />

          <Footer />

          <CartDrawer
            open={cartOpen}
            items={items}
            onClose={() => setCartOpen(false)}
            onInc={inc}
            onDec={dec}
            onRemove={remove}
            onCheckout={() => {
              setCartOpen(false);
              setCheckoutOpen(true);
            }}
          />

          <Checkout
            open={checkoutOpen}
            items={items}
            onClose={() => setCheckoutOpen(false)}
          />
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(
      <App />
    );
  </script>
</body>
</html>
